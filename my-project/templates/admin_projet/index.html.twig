{% extends 'base.html.twig' %}

{% block title %} Gérer les Mixes | Jumperpich  {% endblock %}

{% block body %}

    <style>
        /* Default table styles */
        table {
            border-collapse: collapse;
            text-align: left;
            width: 100%;
        }
        table tr {
            border: 1px solid
        }
        table th, table td {
            padding: 10px 20px;
        }
        table td span {

            color: #ffffff;
            display: none;
            font-size: 10px;
            font-weight: bold;
            padding: 5px;
            position: absolute;
            text-transform: uppercase;
            top: 0;
            left: 0;
        }

        /* Simple CSS for flexbox table on mobile */
        @media(max-width: 800px) {
            table thead {
                left: -9999px;
                position: absolute;
                visibility: hidden;
            }
            table tr {
                border: 0;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                margin-bottom: 40px;
            }
            table td {
                border: 1px solid;
                margin: 0 -1px -1px 0;
                padding-top: 35px;
                position: relative;
                width: 50%;
            }
            table td span {
                display: block;
                background: red;
            }
        }
    </style>

            <div class="container pt-4">

                {% for message in app.flashes('success') %}

                <div class="row">

                    <div class="fixed-top alert alert-success alert-dismissible fade show col-md-4 col-md-offset-4" align="center" role="alert">
                        <strong>Succès !</strong> {{ message }}
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                </div>
                {% endfor %}
            </div>

    <div class="container">

        {% if soon is not empty %}

        <h1 class="text-center h2home mt-4 pt-4" style="background: rgba(0,0,0,.7);padding: 20px 20px;;min-height: 41px;"> Mix annoncé </h1>

        <div class="mt-4">
            <table class="text-center">
                <thead>
                <tr>
                    <th><i class="fas fa-headphones-alt"></i></th>
                    <th><i class="far fa-calendar-alt"></i></th>
                    <th><i class="fas fa-wrench"></i></th>
                </tr>
                </thead>
                <tbody>
                {% for projet in soon %}
                    <tr>
                        <td><span><i class="fas fa-headphones-alt"></i></span>
                            <b>{{ projet.name }}</b>
                        </td>
                        <td><span><i class="far fa-calendar-alt"></i></span>
                            {{ projet.date|date("d/m/Y") }}
                        </td>

                        <td><span><i class="fas fa-wrench"></i></span>
                            <form method="post" action="{{ path('admin.projet.soon.delete' , {id : projet.id}) }}"
                                  style="display: inline-block"
                                  onsubmit="return confirm('Toute suppression est définitive ! Êtes-vous sûr de vouloir supprimer cette annonce ? ')">
                                <input type="hidden" name="_method" value="DELETE">
                                <input type="hidden" name="_token" value="{{ csrf_token('authenticate') }}">
                                <button class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        {% endif %}

        {% if soon is empty %}

            <h1 class="text-center h2home mt-4 pt-4" style="background: rgba(0,0,0,.7);padding: 20px 20px;;min-height: 41px;"> Aucun mix annoncé </h1>

        {% endif %}


        <h1 class="text-center h2home mt-4 pt-4" style="background: rgba(0,0,0,.7);padding: 20px 20px;;min-height: 41px;"> MIXES EN LIGNE </h1>

        <div class="mt-4">
            <table class="text-center">
                <thead>
                <tr>
                    <th><i class="fas fa-headphones-alt"></i></th>
                    <th><i class="far fa-calendar-alt"></i></th>
                    <th><i class="far fa-eye"></i></th>
                    <th><i class="fas fa-download"></i></th>
                    <th><i class="fas fa-wrench"></i></th>
                </tr>
                </thead>
                <tbody>
                {% for projet in projets %}
                    <tr>
                        <td><span><i class="fas fa-headphones-alt"></i></span>
                            <b><a href="{{ path('projet.show', {'id': projet.id, "slug": projet.slug}) }}">{{ projet.title }}</a></b>
                        </td>
                        <td><span><i class="far fa-calendar-alt"></i></span>
                            {{ projet.createdAt | date('Y') }}
                        </td>
                        <td><span><i class="far fa-eye"></i></span>
                            {{ projet.views }}
                        </td>
                        <td><span><i class="fas fa-download"></i></span>
                            {{ projet.downloadcount }}
                        </td>


                        <td><span><i class="fas fa-wrench"></i></span>
                            <a href="{{ path('admin.projet.edit', {'id': projet.id, "slug": projet.slug}) }}" class="btn btn-primary"><i class="far fa-edit"></i></a>
                            <form method="post" action="{{ path('admin.projet.delete' , {id : projet.id}) }}"
                                  style="display: inline-block"
                                  onsubmit="return confirm('Toute suppression est définitive ! Êtes-vous sûr de vouloir supprimer ce projet ? ')">
                                <input type="hidden" name="_method" value="DELETE">
                                <input type="hidden" name="_token" value="{{ csrf_token('authenticate') }}">
                                <button class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

        </div>


        <h1 class="text-center h2home mt-4 pt-4" style="background: rgba(0,0,0,.7);padding: 20px 20px;;min-height: 41px;"> ADMIN </h1>


        <div class="container mt-4">
            <nav>
                <ul class="nav flex-column text-center">
                    <li class="nav-item pt-4 pb-4">
                        <a href="{{ path('tag_index') }}" class="list-group-item" style="color: black"> Gérer les tags </a>
                    </li>
                    <li class="nav-item  pt-4 pb-4">
                        <a href="{{ path('user.projet.create') }}" class="list-group-item" style="color: black"> Publier un mix</a>
                    </li>
                    <li class="nav-item  pt-4 pb-4">
                        <a href="{{ path('user.projet.create.soon') }}" class="list-group-item" style="color: black"> Annoncer un mix</a>
                    </li>
                    <li class="nav-item  pt-4 pb-4">
                        <a href="{{ path('user.projet.index') }}" class="list-group-item" style="color: black"> Mes informations</a>
                    </li>
                </ul>
            </nav>
        </div>

    </div>

{% endblock %}
